\documentclass[a4paper, landscape]{article}

%\documentclass[a4paper]{article}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{rotating}
\usepackage[margin=0.25in]{geometry}
\usepackage{graphicx}
\usepackage{pdfpages}

\DeclareGraphicsExtensions{.pdf,.png,.jpg}

\newcommand{\vcenteredinclude}[1]{\begingroup
\setbox0=\hbox{\includegraphics{#1}}%
\parbox{\wd0}{\box0}\endgroup}

\newcommand*{\vcenteredhbox}[1]{\begingroup
\setbox0=\hbox{#1}\parbox{\wd0}{\box0}\endgroup}

\begin{document}
\title{NuBank Data Challenge}

\author{John Min}
\maketitle

\tableofcontents

\graphicspath{ {/home/lj/ML/NuBank/Plots/} }

\newpage

\section{Exploratory Data Analysis - Discerning between the good and bad applicants?}

\subsection{Basic Demographics - Age, Gender}
\vspace{40mm}
\begin{center}
\includegraphics[scale=0.45]{applicant_age_repayment_density.pdf}
\includegraphics[scale=0.45]{gender_repayment_density.pdf}
\end{center}

\subsection{Credit Line}
\begin{center}
\includegraphics[scale=0.45]{CL_approved_repayment_density.pdf}
\includegraphics[scale=0.45]{CL_requested_repayment_density.pdf}
\end{center}
\centerline{\includegraphics[scale=0.45]{CL_approved_pct_repayment_density.pdf}
}

\newpage

\subsection{Income}
\vspace{40mm}
\begin{center}
\includegraphics[scale=0.45]{monthly_income_loan_repayment_density.pdf}
\includegraphics[scale=0.45]{salary_frequency_repayment_density.pdf}
\end{center}

\newpage
\subsection{Rent}

\vspace{40mm}

\begin{center}
\includegraphics[scale=0.45]{monthly_rent_loan_repayment_density.pdf}
\includegraphics[scale=0.45]{residence_duration_repayment_density.pdf}
\end{center}

\newpage
\subsection{Credit Scores}
\includegraphics[scale=0.45]{fico_repayment_density.pdf}
\includegraphics[scale=0.45]{serasa_repayment_density.pdf} \\
\includegraphics[scale=0.45]{tu_repayment_density.pdf}
\includegraphics[scale=0.45]{unit4_repayment_density.pdf}

\newpage

\begin{center}
\includegraphics[scale=0.85]{lexisnexis_repayment_density.pdf}
\end{center}

\begin{center}
Note: $ \rho( \text{Unit 4 Score, Lexis Nexis Score}) = .8947$
\end{center}

\newpage



\newpage
\section{Principal Component Analysis (P.C.A.)}
\subsection{Loadings}
\begin{table}[ht]
\centering
\begin{tabular}{rrrrrrrrrrrrrrr}
  \hline
 & Comp.1 & Comp.2 & Comp.3 & Comp.4 & Comp.5 & Comp.6 & Comp.7 & Comp.8 & Comp.9 & Comp.10 & Comp.11 & Comp.12 & Comp.13 & Comp.14 \\ 
  \hline
Credit\_Line\_requested & 0.06 & -0.45 & -0.04 & 0.57 & -0.00 & 0.01 & -0.00 & 0.01 & 0.02 & -0.01 & -0.02 & 0.00 & -0.00 & 0.68 \\ 
  Credit\_Line\_approved & 0.18 & -0.27 & -0.04 & 0.41 & 0.47 & 0.05 & 0.41 & -0.18 & 0.04 & -0.07 & -0.03 & -0.00 & 0.01 & -0.54 \\ 
  monthly\_income\_amount & 0.19 & -0.48 & -0.14 & -0.38 & -0.04 & -0.03 & -0.01 & -0.16 & -0.04 & 0.03 & 0.72 & -0.11 & 0.03 & -0.00 \\ 
  raw\_serasa\_score & 0.01 & -0.01 & -0.13 & -0.01 & 0.64 & -0.09 & -0.74 & -0.01 & -0.13 & 0.03 & -0.02 & -0.01 & -0.01 & -0.00 \\ 
  raw\_unit4\_score & 0.46 & 0.16 & -0.18 & 0.07 & -0.11 & 0.01 & -0.02 & 0.06 & -0.31 & -0.19 & 0.11 & 0.75 & -0.05 & -0.00 \\ 
  raw\_lexisnexis\_score & 0.42 & 0.20 & -0.22 & 0.11 & -0.15 & 0.05 & -0.03 & -0.00 & -0.43 & -0.33 & -0.07 & -0.63 & -0.01 & 0.00 \\ 
  raw\_TU\_score & 0.41 & 0.16 & -0.10 & 0.05 & -0.06 & -0.03 & -0.19 & -0.05 & 0.83 & -0.24 & 0.04 & -0.05 & -0.01 & 0.00 \\ 
  raw\_FICO\_money\_score & 0.46 & 0.09 & -0.01 & 0.04 & -0.06 & 0.00 & -0.01 & -0.05 & -0.00 & 0.87 & -0.11 & -0.08 & 0.08 & -0.00 \\ 
  Credit\_Line\_approved\_pct & 0.12 & 0.32 & 0.01 & -0.35 & 0.52 & 0.03 & 0.45 & -0.21 & 0.01 & -0.05 & -0.00 & -0.01 & -0.01 & 0.49 \\ 
  applicant\_age & 0.22 & -0.07 & 0.65 & -0.03 & 0.02 & 0.04 & -0.08 & -0.02 & -0.06 & -0.04 & 0.02 & -0.04 & -0.71 & -0.01 \\ 
  Gender\_facebook\_female & -0.04 & 0.01 & -0.05 & -0.02 & 0.03 & 0.99 & -0.10 & 0.04 & 0.04 & 0.03 & 0.05 & 0.02 & 0.00 & 0.00 \\ 
  age2 & 0.21 & -0.05 & 0.65 & -0.03 & 0.02 & 0.04 & -0.10 & -0.03 & -0.07 & -0.16 & -0.00 & 0.01 & 0.69 & 0.01 \\ 
  income2 & 0.13 & -0.46 & -0.14 & -0.40 & -0.12 & 0.04 & -0.06 & -0.36 & -0.01 & -0.11 & -0.65 & 0.09 & -0.02 & 0.00 \\ 
  rent2 & 0.19 & -0.25 & -0.04 & -0.24 & 0.17 & -0.02 & 0.15 & 0.87 & 0.06 & -0.02 & -0.15 & -0.04 & 0.01 & -0.00 \\ 
   \hline
	Proportion of Variance &  0.259 & 0.156 & 0.134 & 0.119 & 0.081 & 0.071 & 0.063 & 0.053 & 0.025 &  0.020& 0.008 & 0.006 & 0.001 & 0.00\\
   Cumulative Prop. of Var. & 0.259 & 0.415 & 0.550 & 0.669 & 0.751 & 0.823 & 0.886 & 0.939 & 0.9652 & 0.984 & 0.992 & 0.998 & 0.999 & 1.00 \\
   \hline
\end{tabular}
\end{table}
\subsection{Screeplot}
\centerline{\includegraphics[scale=0.42]{screeplot.pdf}}

\section{Classification Tree (CART)}
\includegraphics[scale=0.55]{CART.pdf}


\includegraphics{roc_CART.pdf}

\newpage
\section{Logistic Regression}
\subsection{Stepwise Regression using AIC}

\begin{itemize}
	\item Forward model from Null model: $y \sim raw\_lexisnexis\_score + applicant\_age + salary\_frequency$
	\item Backward model from Full model: $y \sim raw\_lexisnexis\_score + raw\_fico\_score + applicant\_age + salary\_frequency$
	\item Both directions from forward and backward models: $y \sim raw\_lexisnexis\_score + applicant\_age + salary\_frequency$
\end{itemize}

\section{Other Models}
\begin{itemize}
	\item SVM
	\item Random Forest
\end{itemize}

\section{Results - AUC of ROC}

\begin{itemize}
	\item CART: .5685
	\item Logistic Regression: .5747 -- .5848
	\item Support Vector Machine: .5672 -- .5734
	\item Random Forest: .5748 correct in test set
\end{itemize}

\section{Comments and Concerns}

\begin{itemize}
	\item Small sample size (n = 639)
	\item Data cleanliness: applicant\_age, monthly\_rent\_amount, monthly\_income\_amount, residence\_rent\_or\_own
	\item Regression problem instead of binary classification -- proportion of loan paid back
	\item What about rejected applications?
	
	
\end{itemize}

\section{Further work}


\begin{itemize}
	\item Factor Analysis with Categorical Variables	
	\item Boosting/bagging with tree classifier
	\item Feature selection using regularization instead of stepwise method
	\item Improving predictive models
	\item Spatial analysis and regression when there is more data to consider neighborhoods
\end{itemize}

\newpage
\section*{Questions?}

\vspace{85mm}

      \begin{center}

        \font\endfont = cmss10 at 25.40mm
        \endfont 
        \baselineskip 20.0mm

        Thank you

      \end{center}    
	

\end{document}